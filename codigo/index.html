<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/date-fns/2.0.0/date_fns.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/2.0.1/chartjs-plugin-annotation.min.js"></script>
  <title>GlicoStats</title>
</head>

<body>
  <div style="width: 800px;">
    <canvas id="myChart" style="width: 100%; height: 400px"></canvas>
  </div>

  <script>
    //Chart.register(annotationPlugin);

    //Mock data
    var glicemia = [{ x: 1666514113000, y: 70 }, { x: 1666522048000, y: 95 }, { x: 1666524913000, y: 150 }, { x: 1666540048000, y: 112 }, { x: 1666545808000, y: 235 }, { x: 1666555213000, y: 79 }];
    var refeicoes = [{ x: 1666521013000, y: 200 }, { x: 1666539013000, y: 200 }];
    var remedios = [{ x: 1666515613000, y: 150 }];
    var insulina = [{ x: 1666526413000, y: 100 }];

    new Chart("myChart", {
      data: {
        datasets: [
          {
            type: 'line',
            label: 'Glicemia',
            lineTension: 0.2,
            backgroundColor: "rgba(255,0,0,1.0)",
            borderColor: "rgba(255,0,0,1)",
            data: glicemia
          },
          {
            type: 'scatter',
            label: 'Refeições',
            lineTension: 0,
            backgroundColor: "rgba(0,255,0,1.0)",
            borderColor: "rgba(0,255,0,1)",
            data: refeicoes
          },
          {
            type: 'scatter',
            label: 'Remédios',
            lineTension: 0,
            backgroundColor: "rgba(0,0,255,1.0)",
            borderColor: "rgba(0,0,255,1)",
            data: remedios
          },
          {
            type: 'scatter',
            label: 'Insulina',
            lineTension: 0,
            backgroundColor: "rgba(255,0,255,1.0)",
            borderColor: "rgba(255,0,255,1)",
            data: insulina
          },

        ]
      },
      options: {
        plugins: {
          autocolors: false,
          annotation: {
            annotations: {
              box1: {
                // Indicates the type of annotation
                type: 'box',
                xMin: 1,
                xMax: 100000000000000,
                yMin: 70,
                yMax: 150,
                backgroundColor: 'rgba(255, 99, 132, 0.25)'
              }
            }
          }
        },
        legend: {
          position: 'top',
        },
        title: {
          display: true,
          text: 'Glicose'
        },
        scales: {
          x: {
            type: 'time',
            ticks: {
              source: 'data'
            }
          },
          y: {
            min: 0,
            max: 500,
          },
        }
      },
      plugins: ['chartjs-plugin-annotation']
    });
  </script>

</body>

</html>